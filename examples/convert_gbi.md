Convert group-by-individual data to long format
================

## Simulate some data

``` r
obs <- t(sapply(1:20, function(x) rbinom(8, 1, 0.5)))
obs
```

    ##       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
    ##  [1,]    1    1    0    0    1    0    0    1
    ##  [2,]    0    1    0    1    0    1    1    1
    ##  [3,]    0    0    1    0    1    0    1    0
    ##  [4,]    0    0    0    1    0    0    1    1
    ##  [5,]    1    0    0    0    0    0    0    0
    ##  [6,]    1    0    1    1    0    1    1    1
    ##  [7,]    1    1    1    1    1    0    0    1
    ##  [8,]    1    1    0    1    1    1    1    1
    ##  [9,]    1    1    1    1    0    1    1    1
    ## [10,]    1    1    0    1    1    1    1    1
    ## [11,]    0    1    0    1    0    0    1    0
    ## [12,]    0    1    1    1    1    1    0    1
    ## [13,]    0    1    0    0    1    1    0    0
    ## [14,]    0    0    1    1    0    1    1    1
    ## [15,]    1    0    0    1    0    1    1    0
    ## [16,]    0    0    0    0    1    1    1    1
    ## [17,]    1    0    0    1    1    1    0    1
    ## [18,]    1    1    1    0    1    0    1    0
    ## [19,]    0    1    1    0    0    0    1    1
    ## [20,]    1    1    1    1    0    1    1    1

## Convert to long format

``` r
df <- data.frame(node_1=numeric(), node_2=numeric(), social_event=numeric(), obs_id=numeric())
for (obs_id in 1:nrow(obs)) {
  for (i in which(obs[obs_id, ] == 1)) {
    for (j in 1:ncol(obs)) {
      if (i != j) {
        # Hacky bit to make sure node_1 < node_2, not necessary but makes things a bit easier.
        if (i < j) {
          node_1 <- i
          node_2 <- j
        } else {
          node_1 <- j
          node_2 <- i
        }
        df[nrow(df) + 1, ] <- list(node_1=node_1, node_2=node_2, social_event=(obs[obs_id, i] == obs[obs_id, j]), obs_id=obs_id)
      }
    }
  }
}
df
```

    ##     node_1 node_2 social_event obs_id
    ## 1        1      2            1      1
    ## 2        1      3            0      1
    ## 3        1      4            0      1
    ## 4        1      5            1      1
    ## 5        1      6            0      1
    ## 6        1      7            0      1
    ## 7        1      8            1      1
    ## 8        1      2            1      1
    ## 9        2      3            0      1
    ## 10       2      4            0      1
    ## 11       2      5            1      1
    ## 12       2      6            0      1
    ## 13       2      7            0      1
    ## 14       2      8            1      1
    ## 15       1      5            1      1
    ## 16       2      5            1      1
    ## 17       3      5            0      1
    ## 18       4      5            0      1
    ## 19       5      6            0      1
    ## 20       5      7            0      1
    ## 21       5      8            1      1
    ## 22       1      8            1      1
    ## 23       2      8            1      1
    ## 24       3      8            0      1
    ## 25       4      8            0      1
    ## 26       5      8            1      1
    ## 27       6      8            0      1
    ## 28       7      8            0      1
    ## 29       1      2            0      2
    ## 30       2      3            0      2
    ## 31       2      4            1      2
    ## 32       2      5            0      2
    ## 33       2      6            1      2
    ## 34       2      7            1      2
    ## 35       2      8            1      2
    ## 36       1      4            0      2
    ## 37       2      4            1      2
    ## 38       3      4            0      2
    ## 39       4      5            0      2
    ## 40       4      6            1      2
    ## 41       4      7            1      2
    ## 42       4      8            1      2
    ## 43       1      6            0      2
    ## 44       2      6            1      2
    ## 45       3      6            0      2
    ## 46       4      6            1      2
    ## 47       5      6            0      2
    ## 48       6      7            1      2
    ## 49       6      8            1      2
    ## 50       1      7            0      2
    ## 51       2      7            1      2
    ## 52       3      7            0      2
    ## 53       4      7            1      2
    ## 54       5      7            0      2
    ## 55       6      7            1      2
    ## 56       7      8            1      2
    ## 57       1      8            0      2
    ## 58       2      8            1      2
    ## 59       3      8            0      2
    ## 60       4      8            1      2
    ## 61       5      8            0      2
    ## 62       6      8            1      2
    ## 63       7      8            1      2
    ## 64       1      3            0      3
    ## 65       2      3            0      3
    ## 66       3      4            0      3
    ## 67       3      5            1      3
    ## 68       3      6            0      3
    ## 69       3      7            1      3
    ## 70       3      8            0      3
    ## 71       1      5            0      3
    ## 72       2      5            0      3
    ## 73       3      5            1      3
    ## 74       4      5            0      3
    ## 75       5      6            0      3
    ## 76       5      7            1      3
    ## 77       5      8            0      3
    ## 78       1      7            0      3
    ## 79       2      7            0      3
    ## 80       3      7            1      3
    ## 81       4      7            0      3
    ## 82       5      7            1      3
    ## 83       6      7            0      3
    ## 84       7      8            0      3
    ## 85       1      4            0      4
    ## 86       2      4            0      4
    ## 87       3      4            0      4
    ## 88       4      5            0      4
    ## 89       4      6            0      4
    ## 90       4      7            1      4
    ## 91       4      8            1      4
    ## 92       1      7            0      4
    ## 93       2      7            0      4
    ## 94       3      7            0      4
    ## 95       4      7            1      4
    ## 96       5      7            0      4
    ## 97       6      7            0      4
    ## 98       7      8            1      4
    ## 99       1      8            0      4
    ## 100      2      8            0      4
    ## 101      3      8            0      4
    ## 102      4      8            1      4
    ## 103      5      8            0      4
    ## 104      6      8            0      4
    ## 105      7      8            1      4
    ## 106      1      2            0      5
    ## 107      1      3            0      5
    ## 108      1      4            0      5
    ## 109      1      5            0      5
    ## 110      1      6            0      5
    ## 111      1      7            0      5
    ## 112      1      8            0      5
    ## 113      1      2            0      6
    ## 114      1      3            1      6
    ## 115      1      4            1      6
    ## 116      1      5            0      6
    ## 117      1      6            1      6
    ## 118      1      7            1      6
    ## 119      1      8            1      6
    ## 120      1      3            1      6
    ## 121      2      3            0      6
    ## 122      3      4            1      6
    ## 123      3      5            0      6
    ## 124      3      6            1      6
    ## 125      3      7            1      6
    ## 126      3      8            1      6
    ## 127      1      4            1      6
    ## 128      2      4            0      6
    ## 129      3      4            1      6
    ## 130      4      5            0      6
    ## 131      4      6            1      6
    ## 132      4      7            1      6
    ## 133      4      8            1      6
    ## 134      1      6            1      6
    ## 135      2      6            0      6
    ## 136      3      6            1      6
    ## 137      4      6            1      6
    ## 138      5      6            0      6
    ## 139      6      7            1      6
    ## 140      6      8            1      6
    ## 141      1      7            1      6
    ## 142      2      7            0      6
    ## 143      3      7            1      6
    ## 144      4      7            1      6
    ## 145      5      7            0      6
    ## 146      6      7            1      6
    ## 147      7      8            1      6
    ## 148      1      8            1      6
    ## 149      2      8            0      6
    ## 150      3      8            1      6
    ## 151      4      8            1      6
    ## 152      5      8            0      6
    ## 153      6      8            1      6
    ## 154      7      8            1      6
    ## 155      1      2            1      7
    ## 156      1      3            1      7
    ## 157      1      4            1      7
    ## 158      1      5            1      7
    ## 159      1      6            0      7
    ## 160      1      7            0      7
    ## 161      1      8            1      7
    ## 162      1      2            1      7
    ## 163      2      3            1      7
    ## 164      2      4            1      7
    ## 165      2      5            1      7
    ## 166      2      6            0      7
    ## 167      2      7            0      7
    ## 168      2      8            1      7
    ## 169      1      3            1      7
    ## 170      2      3            1      7
    ## 171      3      4            1      7
    ## 172      3      5            1      7
    ## 173      3      6            0      7
    ## 174      3      7            0      7
    ## 175      3      8            1      7
    ## 176      1      4            1      7
    ## 177      2      4            1      7
    ## 178      3      4            1      7
    ## 179      4      5            1      7
    ## 180      4      6            0      7
    ## 181      4      7            0      7
    ## 182      4      8            1      7
    ## 183      1      5            1      7
    ## 184      2      5            1      7
    ## 185      3      5            1      7
    ## 186      4      5            1      7
    ## 187      5      6            0      7
    ## 188      5      7            0      7
    ## 189      5      8            1      7
    ## 190      1      8            1      7
    ## 191      2      8            1      7
    ## 192      3      8            1      7
    ## 193      4      8            1      7
    ## 194      5      8            1      7
    ## 195      6      8            0      7
    ## 196      7      8            0      7
    ## 197      1      2            1      8
    ## 198      1      3            0      8
    ## 199      1      4            1      8
    ## 200      1      5            1      8
    ## 201      1      6            1      8
    ## 202      1      7            1      8
    ## 203      1      8            1      8
    ## 204      1      2            1      8
    ## 205      2      3            0      8
    ## 206      2      4            1      8
    ## 207      2      5            1      8
    ## 208      2      6            1      8
    ## 209      2      7            1      8
    ## 210      2      8            1      8
    ## 211      1      4            1      8
    ## 212      2      4            1      8
    ## 213      3      4            0      8
    ## 214      4      5            1      8
    ## 215      4      6            1      8
    ## 216      4      7            1      8
    ## 217      4      8            1      8
    ## 218      1      5            1      8
    ## 219      2      5            1      8
    ## 220      3      5            0      8
    ## 221      4      5            1      8
    ## 222      5      6            1      8
    ## 223      5      7            1      8
    ## 224      5      8            1      8
    ## 225      1      6            1      8
    ## 226      2      6            1      8
    ## 227      3      6            0      8
    ## 228      4      6            1      8
    ## 229      5      6            1      8
    ## 230      6      7            1      8
    ## 231      6      8            1      8
    ## 232      1      7            1      8
    ## 233      2      7            1      8
    ## 234      3      7            0      8
    ## 235      4      7            1      8
    ## 236      5      7            1      8
    ## 237      6      7            1      8
    ## 238      7      8            1      8
    ## 239      1      8            1      8
    ## 240      2      8            1      8
    ## 241      3      8            0      8
    ## 242      4      8            1      8
    ## 243      5      8            1      8
    ## 244      6      8            1      8
    ## 245      7      8            1      8
    ## 246      1      2            1      9
    ## 247      1      3            1      9
    ## 248      1      4            1      9
    ## 249      1      5            0      9
    ## 250      1      6            1      9
    ## 251      1      7            1      9
    ## 252      1      8            1      9
    ## 253      1      2            1      9
    ## 254      2      3            1      9
    ## 255      2      4            1      9
    ## 256      2      5            0      9
    ## 257      2      6            1      9
    ## 258      2      7            1      9
    ## 259      2      8            1      9
    ## 260      1      3            1      9
    ## 261      2      3            1      9
    ## 262      3      4            1      9
    ## 263      3      5            0      9
    ## 264      3      6            1      9
    ## 265      3      7            1      9
    ## 266      3      8            1      9
    ## 267      1      4            1      9
    ## 268      2      4            1      9
    ## 269      3      4            1      9
    ## 270      4      5            0      9
    ## 271      4      6            1      9
    ## 272      4      7            1      9
    ## 273      4      8            1      9
    ## 274      1      6            1      9
    ## 275      2      6            1      9
    ## 276      3      6            1      9
    ## 277      4      6            1      9
    ## 278      5      6            0      9
    ## 279      6      7            1      9
    ## 280      6      8            1      9
    ## 281      1      7            1      9
    ## 282      2      7            1      9
    ## 283      3      7            1      9
    ## 284      4      7            1      9
    ## 285      5      7            0      9
    ## 286      6      7            1      9
    ## 287      7      8            1      9
    ## 288      1      8            1      9
    ## 289      2      8            1      9
    ## 290      3      8            1      9
    ## 291      4      8            1      9
    ## 292      5      8            0      9
    ## 293      6      8            1      9
    ## 294      7      8            1      9
    ## 295      1      2            1     10
    ## 296      1      3            0     10
    ## 297      1      4            1     10
    ## 298      1      5            1     10
    ## 299      1      6            1     10
    ## 300      1      7            1     10
    ## 301      1      8            1     10
    ## 302      1      2            1     10
    ## 303      2      3            0     10
    ## 304      2      4            1     10
    ## 305      2      5            1     10
    ## 306      2      6            1     10
    ## 307      2      7            1     10
    ## 308      2      8            1     10
    ## 309      1      4            1     10
    ## 310      2      4            1     10
    ## 311      3      4            0     10
    ## 312      4      5            1     10
    ## 313      4      6            1     10
    ## 314      4      7            1     10
    ## 315      4      8            1     10
    ## 316      1      5            1     10
    ## 317      2      5            1     10
    ## 318      3      5            0     10
    ## 319      4      5            1     10
    ## 320      5      6            1     10
    ## 321      5      7            1     10
    ## 322      5      8            1     10
    ## 323      1      6            1     10
    ## 324      2      6            1     10
    ## 325      3      6            0     10
    ## 326      4      6            1     10
    ## 327      5      6            1     10
    ## 328      6      7            1     10
    ## 329      6      8            1     10
    ## 330      1      7            1     10
    ## 331      2      7            1     10
    ## 332      3      7            0     10
    ## 333      4      7            1     10
    ## 334      5      7            1     10
    ## 335      6      7            1     10
    ## 336      7      8            1     10
    ## 337      1      8            1     10
    ## 338      2      8            1     10
    ## 339      3      8            0     10
    ## 340      4      8            1     10
    ## 341      5      8            1     10
    ## 342      6      8            1     10
    ## 343      7      8            1     10
    ## 344      1      2            0     11
    ## 345      2      3            0     11
    ## 346      2      4            1     11
    ## 347      2      5            0     11
    ## 348      2      6            0     11
    ## 349      2      7            1     11
    ## 350      2      8            0     11
    ## 351      1      4            0     11
    ## 352      2      4            1     11
    ## 353      3      4            0     11
    ## 354      4      5            0     11
    ## 355      4      6            0     11
    ## 356      4      7            1     11
    ## 357      4      8            0     11
    ## 358      1      7            0     11
    ## 359      2      7            1     11
    ## 360      3      7            0     11
    ## 361      4      7            1     11
    ## 362      5      7            0     11
    ## 363      6      7            0     11
    ## 364      7      8            0     11
    ## 365      1      2            0     12
    ## 366      2      3            1     12
    ## 367      2      4            1     12
    ## 368      2      5            1     12
    ## 369      2      6            1     12
    ## 370      2      7            0     12
    ## 371      2      8            1     12
    ## 372      1      3            0     12
    ## 373      2      3            1     12
    ## 374      3      4            1     12
    ## 375      3      5            1     12
    ## 376      3      6            1     12
    ## 377      3      7            0     12
    ## 378      3      8            1     12
    ## 379      1      4            0     12
    ## 380      2      4            1     12
    ## 381      3      4            1     12
    ## 382      4      5            1     12
    ## 383      4      6            1     12
    ## 384      4      7            0     12
    ## 385      4      8            1     12
    ## 386      1      5            0     12
    ## 387      2      5            1     12
    ## 388      3      5            1     12
    ## 389      4      5            1     12
    ## 390      5      6            1     12
    ## 391      5      7            0     12
    ## 392      5      8            1     12
    ## 393      1      6            0     12
    ## 394      2      6            1     12
    ## 395      3      6            1     12
    ## 396      4      6            1     12
    ## 397      5      6            1     12
    ## 398      6      7            0     12
    ## 399      6      8            1     12
    ## 400      1      8            0     12
    ## 401      2      8            1     12
    ## 402      3      8            1     12
    ## 403      4      8            1     12
    ## 404      5      8            1     12
    ## 405      6      8            1     12
    ## 406      7      8            0     12
    ## 407      1      2            0     13
    ## 408      2      3            0     13
    ## 409      2      4            0     13
    ## 410      2      5            1     13
    ## 411      2      6            1     13
    ## 412      2      7            0     13
    ## 413      2      8            0     13
    ## 414      1      5            0     13
    ## 415      2      5            1     13
    ## 416      3      5            0     13
    ## 417      4      5            0     13
    ## 418      5      6            1     13
    ## 419      5      7            0     13
    ## 420      5      8            0     13
    ## 421      1      6            0     13
    ## 422      2      6            1     13
    ## 423      3      6            0     13
    ## 424      4      6            0     13
    ## 425      5      6            1     13
    ## 426      6      7            0     13
    ## 427      6      8            0     13
    ## 428      1      3            0     14
    ## 429      2      3            0     14
    ## 430      3      4            1     14
    ## 431      3      5            0     14
    ## 432      3      6            1     14
    ## 433      3      7            1     14
    ## 434      3      8            1     14
    ## 435      1      4            0     14
    ## 436      2      4            0     14
    ## 437      3      4            1     14
    ## 438      4      5            0     14
    ## 439      4      6            1     14
    ## 440      4      7            1     14
    ## 441      4      8            1     14
    ## 442      1      6            0     14
    ## 443      2      6            0     14
    ## 444      3      6            1     14
    ## 445      4      6            1     14
    ## 446      5      6            0     14
    ## 447      6      7            1     14
    ## 448      6      8            1     14
    ## 449      1      7            0     14
    ## 450      2      7            0     14
    ## 451      3      7            1     14
    ## 452      4      7            1     14
    ## 453      5      7            0     14
    ## 454      6      7            1     14
    ## 455      7      8            1     14
    ## 456      1      8            0     14
    ## 457      2      8            0     14
    ## 458      3      8            1     14
    ## 459      4      8            1     14
    ## 460      5      8            0     14
    ## 461      6      8            1     14
    ## 462      7      8            1     14
    ## 463      1      2            0     15
    ## 464      1      3            0     15
    ## 465      1      4            1     15
    ## 466      1      5            0     15
    ## 467      1      6            1     15
    ## 468      1      7            1     15
    ## 469      1      8            0     15
    ## 470      1      4            1     15
    ## 471      2      4            0     15
    ## 472      3      4            0     15
    ## 473      4      5            0     15
    ## 474      4      6            1     15
    ## 475      4      7            1     15
    ## 476      4      8            0     15
    ## 477      1      6            1     15
    ## 478      2      6            0     15
    ## 479      3      6            0     15
    ## 480      4      6            1     15
    ## 481      5      6            0     15
    ## 482      6      7            1     15
    ## 483      6      8            0     15
    ## 484      1      7            1     15
    ## 485      2      7            0     15
    ## 486      3      7            0     15
    ## 487      4      7            1     15
    ## 488      5      7            0     15
    ## 489      6      7            1     15
    ## 490      7      8            0     15
    ## 491      1      5            0     16
    ## 492      2      5            0     16
    ## 493      3      5            0     16
    ## 494      4      5            0     16
    ## 495      5      6            1     16
    ## 496      5      7            1     16
    ## 497      5      8            1     16
    ## 498      1      6            0     16
    ## 499      2      6            0     16
    ## 500      3      6            0     16
    ## 501      4      6            0     16
    ## 502      5      6            1     16
    ## 503      6      7            1     16
    ## 504      6      8            1     16
    ## 505      1      7            0     16
    ## 506      2      7            0     16
    ## 507      3      7            0     16
    ## 508      4      7            0     16
    ## 509      5      7            1     16
    ## 510      6      7            1     16
    ## 511      7      8            1     16
    ## 512      1      8            0     16
    ## 513      2      8            0     16
    ## 514      3      8            0     16
    ## 515      4      8            0     16
    ## 516      5      8            1     16
    ## 517      6      8            1     16
    ## 518      7      8            1     16
    ## 519      1      2            0     17
    ## 520      1      3            0     17
    ## 521      1      4            1     17
    ## 522      1      5            1     17
    ## 523      1      6            1     17
    ## 524      1      7            0     17
    ## 525      1      8            1     17
    ## 526      1      4            1     17
    ## 527      2      4            0     17
    ## 528      3      4            0     17
    ## 529      4      5            1     17
    ## 530      4      6            1     17
    ## 531      4      7            0     17
    ## 532      4      8            1     17
    ## 533      1      5            1     17
    ## 534      2      5            0     17
    ## 535      3      5            0     17
    ## 536      4      5            1     17
    ## 537      5      6            1     17
    ## 538      5      7            0     17
    ## 539      5      8            1     17
    ## 540      1      6            1     17
    ## 541      2      6            0     17
    ## 542      3      6            0     17
    ## 543      4      6            1     17
    ## 544      5      6            1     17
    ## 545      6      7            0     17
    ## 546      6      8            1     17
    ## 547      1      8            1     17
    ## 548      2      8            0     17
    ## 549      3      8            0     17
    ## 550      4      8            1     17
    ## 551      5      8            1     17
    ## 552      6      8            1     17
    ## 553      7      8            0     17
    ## 554      1      2            1     18
    ## 555      1      3            1     18
    ## 556      1      4            0     18
    ## 557      1      5            1     18
    ## 558      1      6            0     18
    ## 559      1      7            1     18
    ## 560      1      8            0     18
    ## 561      1      2            1     18
    ## 562      2      3            1     18
    ## 563      2      4            0     18
    ## 564      2      5            1     18
    ## 565      2      6            0     18
    ## 566      2      7            1     18
    ## 567      2      8            0     18
    ## 568      1      3            1     18
    ## 569      2      3            1     18
    ## 570      3      4            0     18
    ## 571      3      5            1     18
    ## 572      3      6            0     18
    ## 573      3      7            1     18
    ## 574      3      8            0     18
    ## 575      1      5            1     18
    ## 576      2      5            1     18
    ## 577      3      5            1     18
    ## 578      4      5            0     18
    ## 579      5      6            0     18
    ## 580      5      7            1     18
    ## 581      5      8            0     18
    ## 582      1      7            1     18
    ## 583      2      7            1     18
    ## 584      3      7            1     18
    ## 585      4      7            0     18
    ## 586      5      7            1     18
    ## 587      6      7            0     18
    ## 588      7      8            0     18
    ## 589      1      2            0     19
    ## 590      2      3            1     19
    ## 591      2      4            0     19
    ## 592      2      5            0     19
    ## 593      2      6            0     19
    ## 594      2      7            1     19
    ## 595      2      8            1     19
    ## 596      1      3            0     19
    ## 597      2      3            1     19
    ## 598      3      4            0     19
    ## 599      3      5            0     19
    ## 600      3      6            0     19
    ## 601      3      7            1     19
    ## 602      3      8            1     19
    ## 603      1      7            0     19
    ## 604      2      7            1     19
    ## 605      3      7            1     19
    ## 606      4      7            0     19
    ## 607      5      7            0     19
    ## 608      6      7            0     19
    ## 609      7      8            1     19
    ## 610      1      8            0     19
    ## 611      2      8            1     19
    ## 612      3      8            1     19
    ## 613      4      8            0     19
    ## 614      5      8            0     19
    ## 615      6      8            0     19
    ## 616      7      8            1     19
    ## 617      1      2            1     20
    ## 618      1      3            1     20
    ## 619      1      4            1     20
    ## 620      1      5            0     20
    ## 621      1      6            1     20
    ## 622      1      7            1     20
    ## 623      1      8            1     20
    ## 624      1      2            1     20
    ## 625      2      3            1     20
    ## 626      2      4            1     20
    ## 627      2      5            0     20
    ## 628      2      6            1     20
    ## 629      2      7            1     20
    ## 630      2      8            1     20
    ## 631      1      3            1     20
    ## 632      2      3            1     20
    ## 633      3      4            1     20
    ## 634      3      5            0     20
    ## 635      3      6            1     20
    ## 636      3      7            1     20
    ## 637      3      8            1     20
    ## 638      1      4            1     20
    ## 639      2      4            1     20
    ## 640      3      4            1     20
    ## 641      4      5            0     20
    ## 642      4      6            1     20
    ## 643      4      7            1     20
    ## 644      4      8            1     20
    ## 645      1      6            1     20
    ## 646      2      6            1     20
    ## 647      3      6            1     20
    ## 648      4      6            1     20
    ## 649      5      6            0     20
    ## 650      6      7            1     20
    ## 651      6      8            1     20
    ## 652      1      7            1     20
    ## 653      2      7            1     20
    ## 654      3      7            1     20
    ## 655      4      7            1     20
    ## 656      5      7            0     20
    ## 657      6      7            1     20
    ## 658      7      8            1     20
    ## 659      1      8            1     20
    ## 660      2      8            1     20
    ## 661      3      8            1     20
    ## 662      4      8            1     20
    ## 663      5      8            0     20
    ## 664      6      8            1     20
    ## 665      7      8            1     20
